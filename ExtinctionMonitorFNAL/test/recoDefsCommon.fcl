// Andrei Gaponenko, 2012

#include "minimalMessageService.fcl"
#include "standardProducers.fcl"
#include "standardServices.fcl"

source : { module_type : RootInput }

services : {
    message : @local::default_message
    scheduler: { defaultExceptions : false }
    TFileService : {}
    user : {
        ConditionsService : { conditionsfile : "Mu2eG4/test/conditions_01.txt" }
        GlobalConstantsService : { inputFile : "Mu2eG4/test/globalConstants_01.txt" }
    }
}

physics : {
    producers : {
        pixelRawClusterization : @local::pixelRawClusterization
        pixelRecoClusterization : @local::pixelRecoClusterization
        pixelRecoClusterTruthMaking : @local::pixelRecoClusterTruthMaking
        EMFPatRecFromTracklets : @local::EMFPatRecFromTracklets
        EMFPatRecFromTrackletsTruthMaking : @local::EMFPatRecFromTrackletsTruthMaking
    }

    analyzers: {
        emfRecoClusters: {
            module_type: EMFDetHistRecoClusters
            inputModuleLabel  : "pixelRecoClusterization"
        }
        emfPatRec: {
            module_type: EMFDetHistPatRec
            patRecModuleLabel  : "EMFPatRecFromTracklets"
        }
        EMFPatRecFromTrackletsAnalysis : {
            module_type : EMFDetMCHistPatRec
            patRecModuleLabel : "EMFPatRecFromTracklets"
            trkTruthModuleLabel : "EMFPatRecFromTrackletsTruthMaking"
            clusterTruthModuleLabel : "pixelRecoClusterTruthMaking"

            cutParticleMinClusters : 6
            cutHitXmax : 15 // mm
            cutHitYmax : 15 // mm

            cutMinCommonClusters : 6
        }
    }

    makers : [ pixelRawClusterization
               , pixelRecoClusterization, pixelRecoClusterTruthMaking
               , EMFPatRecFromTracklets, EMFPatRecFromTrackletsTruthMaking
             ]

    diagnostic: [ emfRecoClusters, emfPatRec, EMFPatRecFromTrackletsAnalysis ]

    out : [FullOutput]

    trigger_paths  : [makers]
    end_paths : [diagnostic]
    //end_paths : [diagnostic, out]
}

outputs: {
    FullOutput : {
        module_type : RootOutput
        fileName    : "extMonFNALSingleParticleReconstruction.root"
  }
}

// somewhat reduce the amount of "volatile" printouts
services.message.destinations.log.noTimeStamps : true
services.message.statistics.noTimeStamps : true

// This tells emacs to view this file in the JavaScript mode.
// Local Variables:
// mode:js
// End:
