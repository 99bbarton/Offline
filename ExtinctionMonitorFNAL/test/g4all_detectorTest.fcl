// Shoot particles through ExtMonFNAL detector.
//
// Andrei Gaponenko, 2011

#include "minimalMessageService.fcl"
#include "standardProducers.fcl"
#include "standardServices.fcl"

// Give this job a name.
process_name : channelTest

source : {
    module_type : EmptyEvent
    maxEvents : 10
}

services : {
    message : @local::default_message

    scheduler: { defaultExceptions : false }
    TFileService : { fileName : "g4hists_detectorTest.root" }
    RandomNumberGenerator : {}

    user : {
        GeometryService : { inputFile : "ExtinctionMonitorFNAL/test/geom_s2EMFTwoGrooves.txt" }
        ConditionsService : { conditionsfile : "Mu2eG4/test/conditions_01.txt" }
        GlobalConstantsService : { inputFile : "Mu2eG4/test/globalConstants_01.txt" }
        SeedService       : @local::automaticSeeds
        G4Helper : { }
    }
}

physics : {
    producers : {
        generate : {
            module_type   : EventGenerator
            inputfile     : "ExtinctionMonitorFNAL/test/genconfig_detectorTest.txt"
        }

        g4run : @local::g4run

        pixelDigitization : @local::pixelDigitization

        geom : { module_type : GeometryRecorder }
    }

    analyzers: {
        vdprint: {
            module_type: EMFCPrint
            inputModuleLabel  : "g4run"
            inputInstanceName : "virtualdetector"
        }
        emfprintsim: {
            module_type: EMFDetPrintSim
            inputModuleLabel  : "g4run"
            inputInstanceName : ""
        }
        emfSimHits: {
            module_type: EMFDetHistSimHits
            inputModuleLabel  : "g4run"
            inputInstanceName : ""
        }
        emfprintraw: {
            module_type: EMFDetPrintRaw
            inputModuleLabel  : "pixelDigitization"
            inputInstanceName : ""
        }
        emfprinttruth: {
            module_type: EMFDetPrintTruth
            inputModuleLabel  : "pixelDigitization"
            inputInstanceName : ""
        }
        hitValidation: {
            module_type: EMFRawHitsValidator
            inputModuleLabel : "pixelDigitization"
            inputInstanceName : ""
            geomModuleLabel : "geom"
            geomInstanceName : ""
        }
    }

    tprint : [ generate, g4run, pixelDigitization ]
    gm  : [ geom ]

    eprint: [ emfprintsim, emfSimHits, emfprinttruth, hitValidation ]
    out : [ FullOutput ]

    trigger_paths  : [gm, tprint]
    end_paths : [ eprint, out ]
}

outputs: {
    FullOutput : {
        module_type : RootOutput
        fileName    : "detectorTest.root"
  }
}

//----------------------------------------------------------------
services.user.SeedService.baseSeed         :  0
services.user.SeedService.maxUniqueEngines :  20

// This tells emacs to view this file in the JavaScript mode.
// Local Variables:
// mode:js
// End:
