// Common pieces of configuration for ExtMonFNAL jobs, to be included by top level fcl files.
//
// Andrei Gaponenko, 2011

BEGIN_PROLOG
filterModule : {
    module_type: FilterVDHits
    inputModuleLabel   : "g4run"
    inputInstanceName  : "virtualdetector"
    // acceptedVids       : [ 16 ]
    storeParents       : true
    storeExtraHits     : true
}
END_PROLOG

#include "minimalMessageService.fcl"
#include "standardProducers.fcl"
#include "standardServices.fcl"

services : {
    message : @local::default_message
    scheduler: { defaultExceptions : false }
    RandomNumberGenerator : {}

    user : {
        GeometryService : {
            printConfig : true
            configStatsVerbosity : 0
        }

        ConditionsService : {
            conditionsfile : "Mu2eG4/test/conditions_01.txt"
            printConfig : true
            configStatsVerbosity : 0
        }

        GlobalConstantsService : {
            inputFile : "Mu2eG4/test/globalConstants_01.txt"
            printConfig : true
            configStatsVerbosity : 0
        }

        SeedService       : @local::automaticSeeds

        G4Helper : { }
    }
}

physics : {
    producers : {
        g4run : @local::g4run
        randomsaver : @local::randomsaver
    }

    trigger_paths : [gm,trigFilter]

    eFiltered : [outVDFiltered]
    end_paths : [eFiltered]
}

outputs:
{
    outVDFiltered: {
        module_type: RootOutput
        //fileName: "gvdFiltered.root"
        SelectEvents: { SelectEvents: [trigFilter] }
        outputCommands:   [ "keep *_fvd*_*_*", "keep *_fromVD*_*_*", "keep *_randomsaver_*_*", "keep *_geom*_*_*" ]
    }
}

//----------------------------------------------------------------
// Limit the amount of "Begin processing the ... record" messages
services.message.destinations.log.categories.ArtReport.reportEvery : 1
services.message.destinations.log.categories.ArtReport.limit : 1
services.message.destinations.log.categories.ArtReport.timespan : 60

// This tells emacs to view this file in the JavaScript mode.
// Local Variables:
// mode:js
// End:
