//
// Geometry description of the TTracker, based on Mu2e-doc-888-v5
//   All lengths are given in mm.
//   All angles are given in degrees.
//
// $Id: ttracker_v3.txt,v 1.5 2014/04/11 04:42:50 genser Exp $
// $Author: genser $
// $Date: 2014/04/11 04:42:50 $
//
// Most paramaters are from Mu2e-doc-888-v5
// Parameters not found in that document are:
//    Email from Aseet:
//      End rings are 100mm thick in Z, cover the radial range 700-840mm and are assumed to be made of aluminum.
//      Upper staves are for mechanical support only and carry no cables or other utilities; only the lower ones
//      carry utilities.
//    Email from Robert Wagner
//      Thickness of Au plate on W sense wires is 0.25 micron
//
// Compared to ttracker_v2.txt this version has
//
// 1) Parameters adjusted to match Mu2e-doc-888-v5
//      Plane positions have moved around by a few mm in z.
//      Panels rotated differently.
//      Wires slightly farther out from the center of each support.
//
// 2) Item 1) results in a slightly longer TTracker
//    Therefore the DS2/DS3 boundary must be moved upstream
//    in order to make room for it.  This change preserves
//    the total length of the DS
//
// 3) Bug fixes:
//    The vacuum materials are now DSVacuum, not WAGVacuum.
//    The straw material is now Mylar, not Kapton
//
// 3) New parameters added to describe:
//    - Details of the support structure
//    - The thin metal coatings on the straws and wires
//    - Passivation Margin
//
// FIXME:
// 1) The services section of the staves is not yet described and for now is left as solid Al.
//

#include "Mu2eG4/test/ttracker_v0.txt"

// Tell the TTracker object that we using the detailed support structure.
string ttrackerSupport.model = "detailedv0";

// Mother to hold all straws and supports.
double ttracker.mother.rIn         =   380.; // mm
double ttracker.mother.rOut        =   840.; // mm
double ttracker.mother.halfLength  =  1635.; // mm
double ttracker.mother.z0          = 10175.; // mm

// Adjust spacings and rotations within the TTracker to match Mu2e-doc-888-v5
double ttracker.deviceHalfSeparation        =    23.5;
double ttracker.deviceSpacing               =   140.86;
double ttracker.supportHalfThickness        =     2.5;
vector<double> ttracker.manifoldHalfLengths = { 3.125, 5.0, 8.5};
double ttracker.manifoldYOffset             =     0.;
double ttracker.sectorPhi0                  =    45.; // degrees
int    ttracker.layersPerSector             =    2;
int    ttracker.strawsPerManifold           =    1; //  1,10
int    ttracker.manifoldsPerEnd             =   48; // 50, 5
double ttracker.strawGap                    =     1.25;
int    ttracker.numDevices                  = 44;
int    ttracker.rotationPattern             =    2;
double ttracker.oddStationRotation          = 60.0;

//vector<int> ttracker.nonExistingDevices = { 8,9,16,17,26,27,34,35 };

// Bug fixes
string ttracker.mat.vacuum             = "DSVacuum";
vector<string> ttracker.strawMaterials = { "G4_MYLAR", "StrawGas", "G4_W" };

// A new parameter to help define the active length of each straw.
double ttracker.passivationMargin = 10.;

// Define the parameters of the support structure.
double ttrackerSupport.endRing.outerRadius =  840.;
double ttrackerSupport.endRing.innerRadius =  700.;
double ttrackerSupport.endRing.halfLength  =   50.;
double ttrackerSupport.endRing.zOffset     = 1610.;
string ttrackerSupport.endRing.material    = "G4_Al";

vector<int> ttrackerSupport.midRing.slot  = { 19, 20 };
double ttrackerSupport.midRing.halfLength = 10.;

int    ttrackerSupport.stave.nstaves       =   3;
double ttrackerSupport.stave.phi0          = -75.; // -90+phiWidth/2. will put stave 0 at the top.
double ttrackerSupport.stave.phiWidth      =  30.;
string ttrackerSupport.stave.material      = "G4_Al";

double ttrackerSupport.innerRing.innerRadius  = 700.;
double ttrackerSupport.innerRing.outerRadius  = 710.;
double ttrackerSupport.innerRing.halfLength   =  22.5;
string ttrackerSupport.innerRing.material     =  "StainlessSteel";

double ttrackerSupport.centerPlate.halfLength =  5.;
string ttrackerSupport.centerPlate.material   = "G4_Al";

double ttrackerSupport.outerRing.innerRadius  = 790.;
double ttrackerSupport.outerRing.outerRadius  = 800.;
string ttrackerSupport.outerRing.material     =  "StainlessSteel";

double ttrackerSupport.cover.halfLength       =  1.5;
string ttrackerSupport.cover.material         =  "G4_BRASS";

double ttrackerSupport.electronics.g10.halfLength  =  1.5;
string ttrackerSupport.electronics.g10.material    =  "G10";

double ttrackerSupport.electronics.cu.halfLength   =  0.5;
string ttrackerSupport.electronics.cu.material     =  "G4_Cu";

double ttrackerSupport.channel.zOffset  = 11.0;
double ttrackerSupport.channel.depth    =  5.0;
string ttrackerSupport.channel.material =  "DSVacuum";

string ttrackerSupport.electronicsSpace.material =  "StrawGas";

// Define the parameters of the metal coatings on the straws and wires.
double ttracker.straw.wallOuterMetal.thickness  = 0.00005;
string ttracker.straw.wallOuterMetal.material   = "G4_Al";
double ttracker.straw.wallInnerMetal1.thickness = 0.00005;
string ttracker.straw.wallInnerMetal1.material  = "G4_Al";
double ttracker.straw.wallInnerMetal2.thickness = 0.00002;
string ttracker.straw.wallInnerMetal2.material  = "G4_Au";
double ttracker.straw.wirePlate.thickness       = 0.00025;
string ttracker.straw.wirePlate.material        = "G4_Au";

bool   ttracker.ActiveWr_Wl_SD    = false;   //Active the Sensitive Detector for the wires and straw wall.

//
// This tells emacs to view this file in c++ mode.
// Local Variables:
// mode:c++
// End:
