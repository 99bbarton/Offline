// Full geometry for running ExtMonFNAL studies.

#include "Mu2eG4/test/geom_01_LowDetailGraphics.txt"

// Make sure the face of beam dump shielding is not shadowed
bool hasExtMonUCI = false;

double toyPS.toyEnclosure.Thickness = 2.84; // mm
string toyPS.toyEnclosure.materialName = "G4_Ti";

//int g4.steppingActionMaxSteps = 100000;
//int g4.stepsSizeLimit = 10000;
int g4.particlesSizeLimit = 100000;

// bool g4SteppingAction.killerVerbose = true;
vector<string> g4SteppingAction.killInTheseVolumes = { "VirtualDetector_EMFC1Entrance", "VirtualDetector_Coll1_In" };

// // Uncomment to enable debug printout on a per event or per track basis.
// vector<int> g4.steppingActionEventList = { 0, 1, 2, 3, 4, 5 };
// vector<int> g4.steppingActionTrackList = {    1, 2, 3, 4, 5 };
// vector<int> g4.trackingActionEventList = { 0, 1, 2, 3, 4, 5};

//----------------------------------------------------------------
// Tweak visibility for debugging the channel setup

bool extMonFilter.collimator1.alignmentHole.visible = false;
bool extMonFilter.collimator1.alignmentHole.solid = false;
bool extMonFilter.collimator1.alignmentPlug.visible = false;
bool extMonFilter.collimator1.alignmentPlug.solid = false;
bool extMonFilter.collimator1.channel.visible = true;
bool extMonFilter.collimator1.channel.solid = false;

bool extMonFilter.collimator2.alignmentHole.visible = false;
bool extMonFilter.collimator2.alignmentHole.solid = false;
bool extMonFilter.collimator2.alignmentPlug.visible = false;
bool extMonFilter.collimator2.alignmentPlug.solid = false;
bool extMonFilter.collimator2.channel.visible = true;
bool extMonFilter.collimator2.channel.solid = false;

bool extMonFilter.magnet.iron.visible = true;
bool extMonFilter.magnet.iron.solid = false;
bool extMonFilter.magnet.aperture.visible = true;
bool extMonFilter.magnet.aperture.solid = false;

// change momentum setting for the debugging
double extMonFilter.nominalMomentum = 4000.; // MeV/c
double extMonFilter.magnet.fieldStrength = 0.222; // Tesla

//test: // Disable all physics except transport.
//test: string g4.physicsListName = "Minimal";
//test: //double extMonFilter.maxG4StepLength = 10.; // mm

// double extMonFilter.magnet.deltaChord = 0.001;
// double extMonFilter.magnet.minEpsilonStep = 1.e-8;
// double extMonFilter.magnet.maxEpsilonStep = 1.e-6;
// double extMonFilter.magnet.deltaOneStep = 1.e-6;

//----------------------------------------------------------------

//// Write mu2e geometry into a GDML file
//bool   writeGDML        = false;
//bool   protonBeamDump.applyROOTVisualizationKludge = false;
//string GDMLFileName     = "extmon_fnal.gdml";

// bool   vd.visible       = false;

//int protonBeamDump.verbosityLevel = 1;
//int extmon_fnal.verbosityLevel = 1;
//int world.verbosityLevel  = 1;
//

// This tells emacs to view this file in c++ mode.
// Local Variables:
// mode:c++
// End:
