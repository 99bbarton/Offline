// Simulate protons on target for ExtMonFNAL
// 
// Andrei Gaponenko, 2011

#include "minimalMessageService.fcl"
#include "standardProducers.fcl"

// Give this job a name.
process_name : runExtMonFNAL

source : {
    module_type : EmptyEvent
    maxEvents : 5
}

services : {
    //message : @local::mf_production
    message : @local::default_message

    scheduler: { defaultExceptions : false }
    TFileService : { fileName : "g4hists_ExtMonFNAL.root" }

    user : {
	GeometryService : { inputFile : "Mu2eG4/test/geom_extMonFNAL.txt" }
	ConditionsService : { conditionsfile : "Mu2eG4/test/conditions_01.txt" }
	RandomNumberGenerator : { }
	G4Helper : { }
    }
}

physics : {
    producers : {
	generate : {
            module_type   : EventGenerator
            inputfile     : "Mu2eG4/test/genconfig_extMonFNAL.txt"
	}

	g4run : {
            module_type          : G4
            generatorModuleLabel : generate
            seed                 : [9877]
	}
    }

    filters: {
	fvd16: {
            module_type: FilterVDHits
	    inputModuleLabel   : "g4run"
	    inputInstanceName  : "virtualdetector"
	    acceptedVids       : [ 16 ]
	}
    }

    t16 : [generate, g4run, fvd16 ]
    //e16 : [ outVD16, fullOutput ]
    e16 : [ outVD16 ]

    trigger_paths  : [t16]
    end_paths      : [e16]
}

outputs:
{
    outVD16: {
	module_type: RootOutput
	fileName: "gvd16.root"
	SelectEvents: { SelectEvents: [t16] }
	outputCommands:   [ "keep *_fvd16_*_*" ]
    }

    fullOutput :
    {
	module_type   :   RootOutput
	fileName      :   "data_extMonFNAL.root"
    }

}
