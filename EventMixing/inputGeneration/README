The files in this directory are examples of how to generate single particle
backgrounds for input to event mixing.  This file contains instructions for
using these jobs.

 $Id: README,v 1.1 2012/07/15 16:01:19 kutschke Exp $
 $Author: kutschke $
 $Date: 2012/07/15 16:01:19 $

Contact person Rob Kutschke

These jobs are designed to be run using condor_submit on detsim
  http://mu2e.fnal.gov/atwork/computing/fermigrid.shtml#frameworkJob

Some important caveats about using these jobs:

1) Each job consists of 3 files, for example dioBG.cmd, dioBG.sh, dioBG.fcl.

2) If you wish to submit a .cmd file multiple times and get unique events on each
   run, you need to change the baseRunNumber line in the corresponding .sh file.
   The run numbers start at 0, not 1.

3) There is a dangerous "feature" in the grid software.  If you submit dioBG.cmd, edit
   dioBG.sh and then resubmit while the first jobs are still queued or still running,
   then the grid will re-run the first job and will NOT pick up the edits you made
   for the second job.  You will get the same events twice:
      http://mu2e.fnal.gov/atwork/computing/fermigrid.shtml#dangerous

   Actually you need to wait up to 30 minutes after the last job in the first set has
   completed before submitting the second job. If you want to submit two jobs in succession,
   you need to change the name of the .sh file in the second job.

4) These are example jobs that may be modified from time to time. Do not commit changes
   that are specific to your work to this directory.  Save those files an another spot in
   cvs, perhaps in an area related to your project or perhaps in your cvs user area.

5) These examples make tracker and calorimeter hits.  This is done for study purposes only
   and they are not used by event mixing, which operates at the level of StepPointMC.

These jobs have several points of maintenance:

1) Edit each .sh file. Find the lines:
   source /grid/fermiapp/mu2e/users/kutschke/HEAD_120711/Offline_g4951/setup_g4951.sh
   source /grid/fermiapp/mu2e/users/kutschke/HEAD_120711/Offline_g4951/bin/addlocal.sh

   Change these to point to the directory that contains your build of Mu2e Offline.
   The build must live on either /grid/fermiapp/mu2e/users or /mu2e/app/users

2) Choose the number of processes you want to run: edit the "queue n" line of each .cmd file

3) Choose the number of events you need to do per job: edit each .sh file to
   set this in the -n option to the line that executes mu2e.

4) If you need to reconfigure the genconfig files:
    a) Make a new genconfig file in your working directory. Prefer to include the
       standard file and override parameters instead of copying and editing the standard file.
    b) Edit the transfer_input_files line of the relevant .cmd file(s) to add the name of
       your new genconfig file.  The right hand side of the equal sign is a comma separated list
       of filenames.
    c) Edit the relevant .fcl file(s) and change the physics.producers.generate.inputfile
       parameter to be the name of your new genconfig file.

