# simAndRecoDigiUncompressed.fcl
#
# FCL configuration file to create uncompressed digi files
#
# A. Edmonds April 2017

#include "fcl/minimalMessageService.fcl"
#include "fcl/standardProducers.fcl"
#include "fcl/standardServices.fcl"
#include "TrkDiag/fcl/prolog.fcl"

process_name : simAndRecoDigiUncompressed

source : {
  module_type : RootInput
}

services : { @table::Services.SimAndReco 

	     TFileService : { fileName : "nts.DSOWNER.uncompressed-digis.DSCONF.SEQ.root" }
}

physics : {
  filters : {
      @table::EventMixing.filters
  }

  producers : {
      @table::TrkAna.producers
  }

  analyzers : {
    @table::TrkAna.analyzers
    genCountLogger: { module_type: GenEventCountReader }
  }

  TriggerPath : [ @sequence::EventMixing.CD3Mixers, 
  	      	  @sequence::TrkAna.SimSequence, 
		  @sequence::TrkHitReco.PrepareHits ]

  EndPath : [ genCountLogger, DigiOutput ]
}

outputs : {
  DigiOutput : {
     module_type: RootOutput
     SelectEvents : [ TriggerPath ]
     outputCommands: [ "drop *_*_*_*", 
    		       "keep mu2e::GenEventCount_*_*_*",
		       @sequence::Tracking.Output.Digis,
		       @sequence::Tracking.Output.Hits,
		       @sequence::Tracking.Output.Tracks,
		       @sequence::Tracking.Output.MCTracks,
		       @sequence::Tracking.Output.MCDigis,
		       @sequence::Tracking.Output.MCHits,
		       "keep mu2e::StepPointMCs_*_tracker_*",
		       "keep mu2e::StepPointMCs_*_virtualdetector_*",
		       "keep mu2e::SimParticlemv_*_*_*",
		       "keep mu2e::EventWeight_*_*_*",
		       "keep *_protonTimeMap_*_*",
		       "keep *_muonTimeMap_*_*",
		       "keep *_CaloDigiFromShower_*_*"
		     ]

     fileName : "sim.DSOWNER.uncompressed-digis.DSCONF.SEQ.art"
  }
}

physics.out : [ genCountLogger, DigiOutput ]
physics.end_paths : [ out ]

#include "EventMixing/fcl/epilog.fcl"
