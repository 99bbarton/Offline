#include "minimalMessageService.fcl"
#include "standardProducers.fcl"
#include "standardServices.fcl"

process_name: ExtMonFNALRoomGenerator

source: {
    module_type: EmptyEvent
    maxEvents: 10
}

services: {
    //message : @local::mf_production
    message: @local::default_message
    scheduler: { defaultExceptions : false }
    TFileService          : { fileName : "histExtMonFNALRoomGenerator.root" }
    RandomNumberGenerator : { }

    user: {
        GlobalConstantsService : { inputFile : "Mu2eG4/test/globalConstants_01.txt" }
        GeometryService   : { inputFile : "Sources/test/geom_emfMARS.txt" }
        SeedService       : @local::automaticSeeds
    }
}

physics: {
    producers: {
        ExtMonFNALRoomGenerator: {
            module_type: ExtMonFNALRoomGenerator
            verbosityLevel : 2

            inputFiles : []

            numReadProtonsPerEvent : 0 // take them all
            fracAcceptedProtons : 1

            geomModuleLabel : ""

            zFront   : -7200
            zBack    : -10200
            yFloor   : +1750
            yCeiling : +4493
            xSW      : -1762
            xNE      : +2814

            srcPositionTolerance : 2 // mm off the plane
            signalHalfdx : 40
            signalHalfdy : 40

            numNeighbors : 5
            minSourceGroupStatistics : 5 //10

            doHistograms : true
        }
    }

    analyzers: {
        dumper: {
            module_type: MARSGenParticleDumper
            inputModuleLabel   : "ExtMonFNALRoomGenerator"
            inputInstanceName  : ""
            geomModuleLabel : ""


            zFront   : -7200
            yFloor   : +1750
            yCeiling : +4493
            xSW      : -1762
            xNE      : +2814
            zBack    : -10200

            sourcePositionTolerance : 2.
        }
    }

    t1: [ExtMonFNALRoomGenerator]
    eout: [outfile]
    edump : [ dumper ]
    trigger_paths: [t1]
    end_paths: [eout, edump]
}

outputs: {
    outfile: {
    module_type    : RootOutput
    fileName       : "ExtMonFNALRoomGenerator.root"
  }
}

// Initialze seeding of random engines: do not put these lines in base .fcl files for grid jobs.
services.user.SeedService.baseSeed         :  0
services.user.SeedService.maxUniqueEngines :  20

physics.producers.ExtMonFNALRoomGenerator.inputFiles : [
    'mars/valexakh/monfnal3w1/andr-uc/rand1/000_fort.86',
    'mars/valexakh/monfnal3w1/andr-uc/rand1/001_fort.86',
    'mars/valexakh/monfnal3w1/andr-uc/rand1/002_fort.86',
    'mars/valexakh/monfnal3w1/andr-uc/rand1/003_fort.86'
]
